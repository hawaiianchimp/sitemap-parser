{"version":3,"sources":["../../src/tests/test.js"],"names":["sitemapper","describe","beforeEach","Sitemapper","it","initializeTimeout","should","be","Function","crawl","parse","fetch","url","equal","timeout","done","then","data","sites","Array","length","above","error","console","getSites","err"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AAEA;;;;AACA,IAAIA,UAAJ;AAEAC,QAAQ,CAAC,YAAD,EAAe,YAAY;AAEjCC,EAAAA,UAAU,CAAC,YAAM;AACfF,IAAAA,UAAU,GAAG,IAAIG,sBAAJ,EAAb;AACD,GAFS,CAAV;AAIAF,EAAAA,QAAQ,CAAC,kBAAD,EAAqB,YAAY;AAEvCG,IAAAA,EAAE,CAAC,sCAAD,EAAyC,YAAM;AAC/CJ,MAAAA,UAAU,CAACK,iBAAX,CAA6BC,MAA7B,CAAoCC,EAApC,CAAuCC,QAAvC;AACD,KAFC,CAAF;AAIAJ,IAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAM;AACnCJ,MAAAA,UAAU,CAACS,KAAX,CAAiBH,MAAjB,CAAwBC,EAAxB,CAA2BC,QAA3B;AACD,KAFC,CAAF;AAIAJ,IAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAM;AACnCJ,MAAAA,UAAU,CAACU,KAAX,CAAiBJ,MAAjB,CAAwBC,EAAxB,CAA2BC,QAA3B;AACD,KAFC,CAAF;AAIAJ,IAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAM;AACnCJ,MAAAA,UAAU,CAACW,KAAX,CAAiBL,MAAjB,CAAwBC,EAAxB,CAA2BC,QAA3B;AACD,KAFC,CAAF;AAIAJ,IAAAA,EAAE,CAAC,4BAAD,EAA+B,YAAM;AACrCJ,MAAAA,UAAU,GAAG,IAAIG,sBAAJ,CAAe;AAC1BS,QAAAA,GAAG,EAAE;AADqB,OAAf,CAAb;AAGAZ,MAAAA,UAAU,CAACY,GAAX,CAAeN,MAAf,CAAsBO,KAAtB,CAA4B,YAA5B;AACD,KALC,CAAF;AAOAT,IAAAA,EAAE,CAAC,gCAAD,EAAmC,YAAM;AACzCJ,MAAAA,UAAU,GAAG,IAAIG,sBAAJ,CAAe;AAC1BW,QAAAA,OAAO,EAAE;AADiB,OAAf,CAAb;AAGAd,MAAAA,UAAU,CAACc,OAAX,CAAmBR,MAAnB,CAA0BO,KAA1B,CAAgC,IAAhC;AACD,KALC,CAAF;AAOAT,IAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAM;AAC7BJ,MAAAA,UAAU,CAACc,OAAX,GAAqB,IAArB;AACAd,MAAAA,UAAU,CAACc,OAAX,CAAmBR,MAAnB,CAA0BO,KAA1B,CAAgC,IAAhC;AACD,KAHC,CAAF;AAKAT,IAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAM;AACzBJ,MAAAA,UAAU,CAACY,GAAX,GAAiB,IAAjB;AACAZ,MAAAA,UAAU,CAACY,GAAX,CAAeN,MAAf,CAAsBO,KAAtB,CAA4B,IAA5B;AACD,KAHC,CAAF;AAID,GAzCO,CAAR;AA2CAZ,EAAAA,QAAQ,CAAC,sCAAD,EAAyC,YAAY;AAC3DG,IAAAA,EAAE,CAAC,mEAAD,EAAsE,UAAUW,IAAV,EAAgB;AACtF,WAAKD,OAAL,CAAa,KAAb;AACA,UAAMF,GAAG,GAAG,uCAAZ;AACAZ,MAAAA,UAAU,CAACW,KAAX,CAAiBC,GAAjB,EACGI,IADH,CACQ,UAAAC,IAAI,EAAI;AACZA,QAAAA,IAAI,CAACC,KAAL,CAAWZ,MAAX,CAAkBC,EAAlB,CAAqBY,KAArB;AACAF,QAAAA,IAAI,CAACL,GAAL,CAASN,MAAT,CAAgBO,KAAhB,CAAsBD,GAAtB;AACAK,QAAAA,IAAI,CAACC,KAAL,CAAWE,MAAX,CAAkBd,MAAlB,CAAyBC,EAAzB,CAA4Bc,KAA5B,CAAkC,CAAlC;AACA,+BAAMJ,IAAI,CAACC,KAAL,CAAW,CAAX,CAAN,EAAqBZ,MAArB,CAA4BC,EAA5B;AACAQ,QAAAA,IAAI;AACL,OAPH,WAQS,UAAAO,KAAK,EAAI;AACdC,QAAAA,OAAO,CAACD,KAAR,CAAc,aAAd;AACAP,QAAAA,IAAI;AACL,OAXH;AAYD,KAfC,CAAF;AAiBAX,IAAAA,EAAE,CAAC,4DAAD,EAA+D,UAAUW,IAAV,EAAgB;AAC/E,WAAKD,OAAL,CAAa,KAAb;AACA,UAAMF,GAAG,GAAG,0BAAZ;AACAZ,MAAAA,UAAU,CAACW,KAAX,CAAiBC,GAAjB,EACGI,IADH,CACQ,UAAAC,IAAI,EAAI;AACZA,QAAAA,IAAI,CAACC,KAAL,CAAWZ,MAAX,CAAkBC,EAAlB,CAAqBY,KAArB;AACAJ,QAAAA,IAAI;AACL,OAJH,WAKS,UAAAO,KAAK,EAAI;AACdC,QAAAA,OAAO,CAACD,KAAR,CAAc,aAAd;AACAP,QAAAA,IAAI;AACL,OARH;AASD,KAZC,CAAF;AAcAX,IAAAA,EAAE,CAAC,qEAAD,EAAwE,UAAUW,IAAV,EAAgB;AACxF,WAAKD,OAAL,CAAa,KAAb;AACA,UAAMF,GAAG,GAAG,yCAAZ;AACAZ,MAAAA,UAAU,CAACW,KAAX,CAAiBC,GAAjB,EACGI,IADH,CACQ,UAAAC,IAAI,EAAI;AACZA,QAAAA,IAAI,CAACC,KAAL,CAAWZ,MAAX,CAAkBC,EAAlB,CAAqBY,KAArB;AACAF,QAAAA,IAAI,CAACL,GAAL,CAASN,MAAT,CAAgBO,KAAhB,CAAsBD,GAAtB;AACAK,QAAAA,IAAI,CAACC,KAAL,CAAWE,MAAX,CAAkBd,MAAlB,CAAyBC,EAAzB,CAA4Bc,KAA5B,CAAkC,CAAlC;AACA,+BAAMJ,IAAI,CAACC,KAAL,CAAW,CAAX,CAAN,EAAqBZ,MAArB,CAA4BC,EAA5B;AACAQ,QAAAA,IAAI;AACL,OAPH,WAQS,UAAAO,KAAK,EAAI;AACdC,QAAAA,OAAO,CAACD,KAAR,CAAc,aAAd;AACAP,QAAAA,IAAI;AACL,OAXH;AAYD,KAfC,CAAF;AAiBAX,IAAAA,EAAE,CAAC,gEAAD,EAAmE,UAAUW,IAAV,EAAgB;AACnF,WAAKD,OAAL,CAAa,KAAb;AACA,UAAMF,GAAG,GAAG,oCAAZ;AACAZ,MAAAA,UAAU,CAACc,OAAX,GAAqB,IAArB;AACAd,MAAAA,UAAU,CAACW,KAAX,CAAiBC,GAAjB,EACGI,IADH,CACQ,UAAAC,IAAI,EAAI;AACZA,QAAAA,IAAI,CAACC,KAAL,CAAWZ,MAAX,CAAkBC,EAAlB,CAAqBY,KAArB;AACAF,QAAAA,IAAI,CAACL,GAAL,CAASN,MAAT,CAAgBO,KAAhB,CAAsBD,GAAtB;AACAK,QAAAA,IAAI,CAACC,KAAL,CAAWE,MAAX,CAAkBd,MAAlB,CAAyBC,EAAzB,CAA4Bc,KAA5B,CAAkC,CAAlC;AACA,+BAAMJ,IAAI,CAACC,KAAL,CAAW,CAAX,CAAN,EAAqBZ,MAArB,CAA4BC,EAA5B;AACAQ,QAAAA,IAAI;AACL,OAPH,WAQS,UAAAO,KAAK,EAAI;AACdC,QAAAA,OAAO,CAACD,KAAR,CAAc,aAAd;AACAP,QAAAA,IAAI;AACL,OAXH;AAYD,KAhBC,CAAF;AAiBD,GAlEO,CAAR;AAoEAd,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACtCG,IAAAA,EAAE,CAAC,yCAAD,EAA4C,UAAUW,IAAV,EAAgB;AAC5D,WAAKD,OAAL,CAAa,KAAb;AACA,UAAMF,GAAG,GAAG,uCAAZ;AACAZ,MAAAA,UAAU,CAACwB,QAAX,CAAoBZ,GAApB,EAAyB,UAACa,GAAD,EAAMP,KAAN,EAAgB;AACvCA,QAAAA,KAAK,CAACZ,MAAN,CAAaC,EAAb,CAAgBY,KAAhB;AACA,+BAAMD,KAAK,CAAC,CAAD,CAAX,EAAgBZ,MAAhB,CAAuBC,EAAvB;AACAQ,QAAAA,IAAI;AACL,OAJD;AAKD,KARC,CAAF;AASD,GAVO,CAAR;AAWD,CAhIO,CAAR","sourcesContent":["import 'async';\nimport 'assert';\nimport 'should';\nimport isUrl from 'is-url';\n\nimport Sitemapper from '../assets/sitemapper.js';\nlet sitemapper;\n\ndescribe('Sitemapper', function () {\n\n  beforeEach(() => {\n    sitemapper = new Sitemapper();\n  });\n\n  describe('Sitemapper Class', function () {\n\n    it('should have initializeTimeout method', () => {\n      sitemapper.initializeTimeout.should.be.Function;\n    });\n\n    it('should have crawl method', () => {\n      sitemapper.crawl.should.be.Function;\n    });\n\n    it('should have parse method', () => {\n      sitemapper.parse.should.be.Function;\n    });\n\n    it('should have fetch method', () => {\n      sitemapper.fetch.should.be.Function;\n    });\n\n    it('should contruct with a url', () => {\n      sitemapper = new Sitemapper({\n        url: 'google.com',\n      });\n      sitemapper.url.should.equal('google.com');\n    });\n\n    it('should contruct with a timeout', () => {\n      sitemapper = new Sitemapper({\n        timeout: 1000,\n      });\n      sitemapper.timeout.should.equal(1000);\n    });\n\n    it('should set timeout', () => {\n      sitemapper.timeout = 1000;\n      sitemapper.timeout.should.equal(1000);\n    });\n\n    it('should set url', () => {\n      sitemapper.url = 1000;\n      sitemapper.url.should.equal(1000);\n    });\n  });\n\n  describe('fetch Method resolves sites to array', function () {\n    it('https://wp.seantburke.com/sitemap.xml sitemaps should be an array', function (done) {\n      this.timeout(30000);\n      const url = 'https://wp.seantburke.com/sitemap.xml';\n      sitemapper.fetch(url)\n        .then(data => {\n          data.sites.should.be.Array;\n          data.url.should.equal(url);\n          data.sites.length.should.be.above(2);\n          isUrl(data.sites[0]).should.be.true;\n          done();\n        })\n        .catch(error => {\n          console.error('Test failed');\n          done();\n        });\n    });\n\n    it('giberish.giberish should fail silently with an empty array', function (done) {\n      this.timeout(30000);\n      const url = 'http://giberish.giberish';\n      sitemapper.fetch(url)\n        .then(data => {\n          data.sites.should.be.Array;\n          done();\n        })\n        .catch(error => {\n          console.error('Test failed');\n          done();\n        });\n    });\n\n    it('https://www.google.com/work/sitemap.xml sitemaps should be an array', function (done) {\n      this.timeout(30000);\n      const url = 'https://www.google.com/work/sitemap.xml';\n      sitemapper.fetch(url)\n        .then(data => {\n          data.sites.should.be.Array;\n          data.url.should.equal(url);\n          data.sites.length.should.be.above(2);\n          isUrl(data.sites[0]).should.be.true;\n          done();\n        })\n        .catch(error => {\n          console.error('Test failed');\n          done();\n        });\n    });\n\n    it('https://www.golinks.io/sitemap.xml sitemaps should be an array', function (done) {\n      this.timeout(30000);\n      const url = 'https://www.golinks.io/sitemap.xml';\n      sitemapper.timeout = 5000;\n      sitemapper.fetch(url)\n        .then(data => {\n          data.sites.should.be.Array;\n          data.url.should.equal(url);\n          data.sites.length.should.be.above(2);\n          isUrl(data.sites[0]).should.be.true;\n          done();\n        })\n        .catch(error => {\n          console.error('Test failed');\n          done();\n        });\n    });\n  });\n\n  describe('getSites method', function () {\n    it('getSites should be backwards compatible', function (done) {\n      this.timeout(30000);\n      const url = 'https://wp.seantburke.com/sitemap.xml';\n      sitemapper.getSites(url, (err, sites) => {\n        sites.should.be.Array;\n        isUrl(sites[0]).should.be.true;\n        done();\n      });\n    });\n  });\n});\n"],"file":"test.js"}